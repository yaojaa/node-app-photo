  {{#extend "stylesheets"}}
<link rel="stylesheet" type="text/css" href="/vendor/sweetalert/sweetalert.css">


<style>
  .aticle_post_container{
    width: 930px;
    padding: 20px;
    background: #fff;
    box-shadow: 1px 1px 3px #ddd;
    margin: 20px auto
  }

  #editor img{
    max-width:100%
  }

  .edui-dialog-image .edui-image-upload1{
    cursor:pointer
  }

</style>

<script>

 var URL ='/vendor/ueditor/';

 var GLOBAL={
  Domain:'{{Domain}}',
  uploadURL:'{{uploadURL}}'
 }

</script>

{{/extend}}

    <link href="/vendor/umeditor1_2_2-utf8-php/themes/default/css/umeditor.min.css" type="text/css" rel="stylesheet">
<div class="container">

<div class="aticle_post_container">
   <h1 align="center">发布套餐</h1>
<hr>
  <p class="form-group"><input class="form-control input-lg" type="text" id="title" name="title" placeholder="标题" value="请输入文章标题" /></p>

    <p  class="form-group"><textarea class="form-control input-lg" type="text" id="title" name="title" placeholder="输入简介"  /></textarea>
  <!--
  <p  class="form-group" ><input class="form-control input-lg" type="text" id="title" name="title" placeholder="标题图" value="" /></p>
  --> 



     <div style="width:900px;margin:20px auto 40px;">
        <script type="text/plain" id="editor" style="width:100%;height:660px;"></script>
    </div>

  <textarea style="position:absolute;left:-100%" id="content" class="form-control" name="content" id="" cols="30" rows="1">
    
  </textarea>


   
   <br/>
    

  <p align="center"><button class="btn btn-success btn-lg" id="Jsubmit" type="button"> 发 布 </button>
  </p>

</div>

</div>


  {{#extend "customerScript"}}
<script src="/vendor/sweetalert/sweetalert.min.js"></script>



 <!-- 配置文件 -->

    <script type="text/javascript" src="/vendor/umeditor1_2_2-utf8-php/umeditor.config.js"></script>
    <!-- 编辑器源码文件 -->
    <script type="text/javascript" src="/vendor/umeditor1_2_2-utf8-php/umeditor.min.js"></script>
    <!-- 实例化编辑器 -->
    <script type="text/javascript">
  var um = UM.getEditor('editor', {
            imageUrl:GLOBAL.uploadURL,
            imagePath:GLOBAL.Domain,
            lang:/^zh/.test(navigator.language || navigator.browserLanguage || navigator.userLanguage) ? 'zh-cn' : 'en',
            langPath:UMEDITOR_CONFIG.UMEDITOR_HOME_URL + "lang/",
            focus: true
        });


    </script>

    <script src="http://cdn.staticfile.org/jquery-validate/1.14.0/jquery.validate.min.js"></script>


    <script>

var postAticle=function(){

    var postdata={
      title:$('#title').val(),
      content:um.getContent(),
    }

    if(postdata.title=='' ){

         swal({
                title: '标题不能为空',
                type: "warning",
                showCancelButton: false
              })
      return 
    }

     if(postdata.content.length<10){

         swal({
                title: '内容字数不足',
                type: "warning",
                showCancelButton: false
              })
      return 
    }

    $.post('/api/v1/createAticle',postdata,function(res) {
      if(res.errorno==-1){
          swal({
                title: '请先登录',
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: "#DD6B55",
                confirmButtonText: "登录",
                cancelButtonText: "取消",
                closeOnConfirm: false
            }, function() {
                location.href = "/login"
            });

      }
      else if(res.error==0){
          alert('发布成功')
      }else{
        alert(res.msg)
      }
    })

}


    $('#Jsubmit').on('click',postAticle)


    


    </script>

{{/extend}}
